!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.UCloudRTC_IM=t():e.UCloudRTC_IM=t()}(window,(function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=15)}([function(e,t,r){"use strict";var n=r(6),o=r(24),s=Object.prototype.toString;function i(e){return"[object Array]"===s.call(e)}function a(e){return null!==e&&"object"==typeof e}function u(e){return"[object Function]"===s.call(e)}function c(e,t){if(null!=e)if("object"!=typeof e&&(e=[e]),i(e))for(var r=0,n=e.length;r<n;r++)t.call(null,e[r],r,e);else for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&t.call(null,e[o],o,e)}e.exports={isArray:i,isArrayBuffer:function(e){return"[object ArrayBuffer]"===s.call(e)},isBuffer:o,isFormData:function(e){return"undefined"!=typeof FormData&&e instanceof FormData},isArrayBufferView:function(e){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(e):e&&e.buffer&&e.buffer instanceof ArrayBuffer},isString:function(e){return"string"==typeof e},isNumber:function(e){return"number"==typeof e},isObject:a,isUndefined:function(e){return void 0===e},isDate:function(e){return"[object Date]"===s.call(e)},isFile:function(e){return"[object File]"===s.call(e)},isBlob:function(e){return"[object Blob]"===s.call(e)},isFunction:u,isStream:function(e){return a(e)&&u(e.pipe)},isURLSearchParams:function(e){return"undefined"!=typeof URLSearchParams&&e instanceof URLSearchParams},isStandardBrowserEnv:function(){return("undefined"==typeof navigator||"ReactNative"!==navigator.product&&"NativeScript"!==navigator.product&&"NS"!==navigator.product)&&("undefined"!=typeof window&&"undefined"!=typeof document)},forEach:c,merge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]=r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return t},deepMerge:function e(){var t={};function r(r,n){"object"==typeof t[n]&&"object"==typeof r?t[n]=e(t[n],r):t[n]="object"==typeof r?e({},r):r}for(var n=0,o=arguments.length;n<o;n++)c(arguments[n],r);return t},extend:function(e,t,r){return c(t,(function(t,o){e[o]=r&&"function"==typeof t?n(t,r):t})),e},trim:function(e){return e.replace(/^\s*/,"").replace(/\s*$/,"")}}},function(e,t,r){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.debug=0]="debug",e[e.info=1]="info",e[e.warn=2]="warn",e[e.error=3]="error"}(n=t.ENUM_LOG_LEVEL||(t.ENUM_LOG_LEVEL={}));var o=n.error,s=function(){function e(e){this.level=o,null!=e&&(this.level=e)}return e.prototype.setLogLevel=function(e){switch(e){case"debug":this.level=n.debug;break;case"info":this.level=n.info;break;case"warn":this.level=n.warn;break;case"error":default:this.level=n.error}},e.prototype._log=function(){var e=Array.prototype.slice.call(arguments);this.onLog(JSON.stringify(e)),console.info.apply(console,e)},e.prototype._error=function(){var e=Array.prototype.slice.call(arguments);this.onLog(JSON.stringify(e)),console.error.apply(console,e)},e.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=n.debug&&this._log.apply(this,[new Date+" [DEBUG]: "].concat(e))},e.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=n.info&&this._log.apply(this,[new Date+" [INFO]: "].concat(e))},e.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=n.warn&&this._log.apply(this,[new Date+" [WARN]: "].concat(e))},e.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.level<=n.error&&this._error.apply(this,[new Date+" [ERROR]: "].concat(e))},e.prototype.onLog=function(e){},e}();t.Logger=s,t.default=new s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SERVER_CONFIG={api:"https://urtc.com.cn",wssUrl:"im.urtc.com.cn:3103"},t.setServers=function(e){for(var r in t.SERVER_CONFIG)t.SERVER_CONFIG[r]=e[r]||t.SERVER_CONFIG[r];console.log(t.SERVER_CONFIG)}},function(e,t,r){"use strict";(function(t){var n=r(44),o=r(45),s=/^[A-Za-z][A-Za-z0-9+-.]*:\/\//,i=/^([a-z][a-z0-9.+-]*:)?(\/\/)?([\S\s]*)/i,a=new RegExp("^[\\x09\\x0A\\x0B\\x0C\\x0D\\x20\\xA0\\u1680\\u180E\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200A\\u202F\\u205F\\u3000\\u2028\\u2029\\uFEFF]+");function u(e){return(e||"").toString().replace(a,"")}var c=[["#","hash"],["?","query"],function(e){return e.replace("\\","/")},["/","pathname"],["@","auth",1],[NaN,"host",void 0,1,1],[/:(\d+)$/,"port",void 0,1],[NaN,"hostname",void 0,1,1]],f={hash:1,query:1};function l(e){var r,n=("undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{}).location||{},o={},i=typeof(e=e||n);if("blob:"===e.protocol)o=new d(unescape(e.pathname),{});else if("string"===i)for(r in o=new d(e,{}),f)delete o[r];else if("object"===i){for(r in e)r in f||(o[r]=e[r]);void 0===o.slashes&&(o.slashes=s.test(e.href))}return o}function p(e){e=u(e);var t=i.exec(e);return{protocol:t[1]?t[1].toLowerCase():"",slashes:!!t[2],rest:t[3]}}function d(e,t,r){if(e=u(e),!(this instanceof d))return new d(e,t,r);var s,i,a,f,h,m,y=c.slice(),g=typeof t,v=this,w=0;for("object"!==g&&"string"!==g&&(r=t,t=null),r&&"function"!=typeof r&&(r=o.parse),t=l(t),s=!(i=p(e||"")).protocol&&!i.slashes,v.slashes=i.slashes||s&&t.slashes,v.protocol=i.protocol||t.protocol||"",e=i.rest,i.slashes||(y[3]=[/(.*)/,"pathname"]);w<y.length;w++)"function"!=typeof(f=y[w])?(a=f[0],m=f[1],a!=a?v[m]=e:"string"==typeof a?~(h=e.indexOf(a))&&("number"==typeof f[2]?(v[m]=e.slice(0,h),e=e.slice(h+f[2])):(v[m]=e.slice(h),e=e.slice(0,h))):(h=a.exec(e))&&(v[m]=h[1],e=e.slice(0,h.index)),v[m]=v[m]||s&&f[3]&&t[m]||"",f[4]&&(v[m]=v[m].toLowerCase())):e=f(e);r&&(v.query=r(v.query)),s&&t.slashes&&"/"!==v.pathname.charAt(0)&&(""!==v.pathname||""!==t.pathname)&&(v.pathname=function(e,t){if(""===e)return t;for(var r=(t||"/").split("/").slice(0,-1).concat(e.split("/")),n=r.length,o=r[n-1],s=!1,i=0;n--;)"."===r[n]?r.splice(n,1):".."===r[n]?(r.splice(n,1),i++):i&&(0===n&&(s=!0),r.splice(n,1),i--);return s&&r.unshift(""),"."!==o&&".."!==o||r.push(""),r.join("/")}(v.pathname,t.pathname)),n(v.port,v.protocol)||(v.host=v.hostname,v.port=""),v.username=v.password="",v.auth&&(f=v.auth.split(":"),v.username=f[0]||"",v.password=f[1]||""),v.origin=v.protocol&&v.host&&"file:"!==v.protocol?v.protocol+"//"+v.host:"null",v.href=v.toString()}d.prototype={set:function(e,t,r){var s=this;switch(e){case"query":"string"==typeof t&&t.length&&(t=(r||o.parse)(t)),s[e]=t;break;case"port":s[e]=t,n(t,s.protocol)?t&&(s.host=s.hostname+":"+t):(s.host=s.hostname,s[e]="");break;case"hostname":s[e]=t,s.port&&(t+=":"+s.port),s.host=t;break;case"host":s[e]=t,/:\d+$/.test(t)?(t=t.split(":"),s.port=t.pop(),s.hostname=t.join(":")):(s.hostname=t,s.port="");break;case"protocol":s.protocol=t.toLowerCase(),s.slashes=!r;break;case"pathname":case"hash":if(t){var i="pathname"===e?"/":"#";s[e]=t.charAt(0)!==i?i+t:t}else s[e]=t;break;default:s[e]=t}for(var a=0;a<c.length;a++){var u=c[a];u[4]&&(s[u[1]]=s[u[1]].toLowerCase())}return s.origin=s.protocol&&s.host&&"file:"!==s.protocol?s.protocol+"//"+s.host:"null",s.href=s.toString(),s},toString:function(e){e&&"function"==typeof e||(e=o.stringify);var t,r=this,n=r.protocol;n&&":"!==n.charAt(n.length-1)&&(n+=":");var s=n+(r.slashes?"//":"");return r.username&&(s+=r.username,r.password&&(s+=":"+r.password),s+="@"),s+=r.host+r.pathname,(t="object"==typeof r.query?e(r.query):r.query)&&(s+="?"!==t.charAt(0)?"?"+t:t),r.hash&&(s+=r.hash),s}},d.extractProtocol=p,d.location=l,d.trimLeft=u,d.qs=o,e.exports=d}).call(this,r(43))},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.version="0.2.26"},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(22),o=r(39),s=r(3),i=r(2),a=function(e){return new s(e).origin!==window.location.origin};function u(e){var t=e.url,r=void 0===t?i.SERVER_CONFIG.api+"/uteach":t,u=e.method,c=void 0===u?"GET":u,f=e.data,l=e.crossOrigin,p=void 0!==l&&l,d=e.needVerifyResponse,h=void 0===d||d;return new Promise((function(e,t){!p&&a(r)?o(r,{param:s.qs.stringify(f)+"&callback"},(function(r,n){return r?t(r):h&&0!==n.err?t(n.msg):void e(n)})):n.default.request({url:r,method:c,responseType:"json",data:f}).then((function(r){var n=r.data;if(h&&0!==n.err)return t(n.msg);e(n)})).catch((function(e){t(e)}))}))}t.query=u,t.get=function(e){return u(Object.assign(e,{method:"GET"}))},t.post=function(e){return u(Object.assign(e,{method:"POST"}))}},function(e,t,r){"use strict";e.exports=function(e,t){return function(){for(var r=new Array(arguments.length),n=0;n<r.length;n++)r[n]=arguments[n];return e.apply(t,r)}}},function(e,t,r){"use strict";var n=r(0);function o(e){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}e.exports=function(e,t,r){if(!t)return e;var s;if(r)s=r(t);else if(n.isURLSearchParams(t))s=t.toString();else{var i=[];n.forEach(t,(function(e,t){null!=e&&(n.isArray(e)?t+="[]":e=[e],n.forEach(e,(function(e){n.isDate(e)?e=e.toISOString():n.isObject(e)&&(e=JSON.stringify(e)),i.push(o(t)+"="+o(e))})))})),s=i.join("&")}if(s){var a=e.indexOf("#");-1!==a&&(e=e.slice(0,a)),e+=(-1===e.indexOf("?")?"?":"&")+s}return e}},function(e,t,r){"use strict";e.exports=function(e){return!(!e||!e.__CANCEL__)}},function(e,t,r){"use strict";(function(t){var n=r(0),o=r(29),s={"Content-Type":"application/x-www-form-urlencoded"};function i(e,t){!n.isUndefined(e)&&n.isUndefined(e["Content-Type"])&&(e["Content-Type"]=t)}var a,u={adapter:(void 0!==t&&"[object process]"===Object.prototype.toString.call(t)?a=r(11):"undefined"!=typeof XMLHttpRequest&&(a=r(11)),a),transformRequest:[function(e,t){return o(t,"Accept"),o(t,"Content-Type"),n.isFormData(e)||n.isArrayBuffer(e)||n.isBuffer(e)||n.isStream(e)||n.isFile(e)||n.isBlob(e)?e:n.isArrayBufferView(e)?e.buffer:n.isURLSearchParams(e)?(i(t,"application/x-www-form-urlencoded;charset=utf-8"),e.toString()):n.isObject(e)?(i(t,"application/json;charset=utf-8"),JSON.stringify(e)):e}],transformResponse:[function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(e){return e>=200&&e<300}};u.headers={common:{Accept:"application/json, text/plain, */*"}},n.forEach(["delete","get","head"],(function(e){u.headers[e]={}})),n.forEach(["post","put","patch"],(function(e){u.headers[e]=n.merge(s)})),e.exports=u}).call(this,r(10))},function(e,t){var r,n,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(r===setTimeout)return setTimeout(e,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(e){r=s}try{n="function"==typeof clearTimeout?clearTimeout:i}catch(e){n=i}}();var u,c=[],f=!1,l=-1;function p(){f&&u&&(f=!1,u.length?c=u.concat(c):l=-1,c.length&&d())}function d(){if(!f){var e=a(p);f=!0;for(var t=c.length;t;){for(u=c,c=[];++l<t;)u&&u[l].run();l=-1,t=c.length}u=null,f=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===i||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function m(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];c.push(new h(e,t)),1!==c.length||f||a(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t,r){"use strict";var n=r(0),o=r(30),s=r(7),i=r(32),a=r(33),u=r(12);e.exports=function(e){return new Promise((function(t,c){var f=e.data,l=e.headers;n.isFormData(f)&&delete l["Content-Type"];var p=new XMLHttpRequest;if(e.auth){var d=e.auth.username||"",h=e.auth.password||"";l.Authorization="Basic "+btoa(d+":"+h)}if(p.open(e.method.toUpperCase(),s(e.url,e.params,e.paramsSerializer),!0),p.timeout=e.timeout,p.onreadystatechange=function(){if(p&&4===p.readyState&&(0!==p.status||p.responseURL&&0===p.responseURL.indexOf("file:"))){var r="getAllResponseHeaders"in p?i(p.getAllResponseHeaders()):null,n={data:e.responseType&&"text"!==e.responseType?p.response:p.responseText,status:p.status,statusText:p.statusText,headers:r,config:e,request:p};o(t,c,n),p=null}},p.onabort=function(){p&&(c(u("Request aborted",e,"ECONNABORTED",p)),p=null)},p.onerror=function(){c(u("Network Error",e,null,p)),p=null},p.ontimeout=function(){c(u("timeout of "+e.timeout+"ms exceeded",e,"ECONNABORTED",p)),p=null},n.isStandardBrowserEnv()){var m=r(34),y=(e.withCredentials||a(e.url))&&e.xsrfCookieName?m.read(e.xsrfCookieName):void 0;y&&(l[e.xsrfHeaderName]=y)}if("setRequestHeader"in p&&n.forEach(l,(function(e,t){void 0===f&&"content-type"===t.toLowerCase()?delete l[t]:p.setRequestHeader(t,e)})),e.withCredentials&&(p.withCredentials=!0),e.responseType)try{p.responseType=e.responseType}catch(t){if("json"!==e.responseType)throw t}"function"==typeof e.onDownloadProgress&&p.addEventListener("progress",e.onDownloadProgress),"function"==typeof e.onUploadProgress&&p.upload&&p.upload.addEventListener("progress",e.onUploadProgress),e.cancelToken&&e.cancelToken.promise.then((function(e){p&&(p.abort(),c(e),p=null)})),void 0===f&&(f=null),p.send(f)}))}},function(e,t,r){"use strict";var n=r(31);e.exports=function(e,t,r,o,s){var i=new Error(e);return n(i,t,r,o,s)}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){t=t||{};var r={};return n.forEach(["url","method","params","data"],(function(e){void 0!==t[e]&&(r[e]=t[e])})),n.forEach(["headers","auth","proxy"],(function(o){n.isObject(t[o])?r[o]=n.deepMerge(e[o],t[o]):void 0!==t[o]?r[o]=t[o]:n.isObject(e[o])?r[o]=n.deepMerge(e[o]):void 0!==e[o]&&(r[o]=e[o])})),n.forEach(["baseURL","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"],(function(n){void 0!==t[n]?r[n]=t[n]:void 0!==e[n]&&(r[n]=e[n])})),r}},function(e,t,r){"use strict";function n(e){this.message=e}n.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},n.prototype.__CANCEL__=!0,e.exports=n},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1);t.logger=n.default;var o=r(2);t.setServers=o.setServers;var s=r(4);t.version=s.version;var i=r(16);t.Client=i.default;var a=r(47);t.ExamClient=a.default;var u={Logger:n.default,setServers:o.setServers,Client:i.default,version:s.version,ExamClient:a.default};t.default=u},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(17),s=r(19),i=["Msg","Ban","Users","CallAuth","CallApply","CallReply","CustomContent","Id","CustomContentPeers","Broadcast"],a=function(){function e(e,t){this.eventWorker=new o.EventWorker,this.logger=n.default,this.roomState=!1,this.app_id=e,this.logger.info(t)}return e.prototype.joinRoom=function(e,t,r,o,i,a){var u=this;if(this.roomState){var c="you have joined the room";return this.logger.error(c),void(a&&a(c))}if("function"!=typeof i&&(i=function(){}),"function"!=typeof a&&(a=function(){}),"string"!=typeof e){var f="room_id is incorrect";return n.default.error(f),void a(f)}if("string"!=typeof o){f="user_name is incorrect";return n.default.error(f),void a(f)}if("string"!=typeof r){f="user_type is incorrect";return n.default.error(f),void a(f)}if("string"!=typeof t){f="user_id is incorrect";return n.default.error(f),void a(f)}this.roomState=!0,this.sessionWorker=new s.SessionWorker(this.app_id,e,t,r,o),this.eventWorker.bind(this.sessionWorker),this.sessionWorker.init(),this.sessionWorker.joinRoom((function(e){i&&i(e)}),(function(e){u.roomState=!1,a&&a(e)}))},e.prototype.close=function(e,t){if(!this.sessionWorker){var r="please join room first";return n.default.error(r),void(t&&t(r))}this.sessionWorker.close((function(t){e&&e(t)}),(function(e){t&&t(e)}))},e.prototype.sendMsg=function(e,t,r){if("string"!=typeof e){var o="msg is incorrect";n.default.error(o)}if(!this.sessionWorker){o="please join room first";return n.default.error(o),void(r&&r(o))}this.sessionWorker.sendChatMsg(e,(function(e){t&&t(e)}),(function(e){r&&r(e)}))},e.prototype.getUser=function(){var e="";return this.sessionWorker?this.sessionWorker.getUser():(e="please join",void this.logger.error(e))},e.prototype.getUsers=function(){var e="";return this.sessionWorker?this.sessionWorker.getUsers():(e="please join",void this.logger.error(e))},e.prototype.getAdminUsers=function(){var e="";return this.sessionWorker?this.sessionWorker.getAdminUsers():(e="please join",void this.logger.error(e))},e.prototype.getDefaultUsers=function(){var e="";return this.sessionWorker?this.sessionWorker.getDefaultUsers():(e="please join",void this.logger.error(e))},e.prototype.sendGlobal=function(e,t,r){if("string"!=typeof e){var o="msg is incorrect";n.default.error(o)}if(!this.sessionWorker){o="please join room first";return n.default.error(o),void(r&&r(o))}this.sessionWorker.sendGlobal(e,(function(e){t&&t(e)}),(function(e){r&&r(e)}))},e.prototype.authCall=function(e,t,r){if("string"!=typeof e){var o="msg is incorrect";n.default.error(o)}if(!this.sessionWorker){o="please join room first";return n.default.error(o),void(r&&r(o))}if(!["open","close"].includes(e)){o="Parameter can only be open or close";return this.logger.info(o),void(r&&r(o))}this.sessionWorker.setAuthCall(e,(function(e){t&&t(e)}),(function(e){r&&r(e)}))},e.prototype.applyCall=function(e,t,r,o){if("string"!=typeof e){var s="ReplyUserId is incorrect";n.default.error(s)}if(!this.sessionWorker){s="please join room first";return n.default.error(s),void(o&&o(s))}if(!["apply","cancel"].includes(t)){s="Parameter can only be open or close";return this.logger.info(s),void(o&&o(s))}this.sessionWorker.sendApplyCall(e,t,(function(e){r&&r(e)}),(function(e){o&&o(e)}))},e.prototype.replyCall=function(e,t,r,o){if("string"!=typeof e){var s="ReplyUserId is incorrect";n.default.error(s)}if(!this.sessionWorker){s="please join room first";return n.default.error(s),void(o&&o(s))}if(!["agree","refuse"].includes(t)){s="Parameter can only be agree or refuse";return this.logger.info(s),void(o&&o(s))}this.sessionWorker.sendReplyCall(e,t,(function(e){r&&r(e)}),(function(e){o&&o(e)}))},e.prototype.sendNotice=function(e,t,r){if(!e){var o="msg is null, please check";n.default.error(o)}if(!this.sessionWorker){o="please join room first";return n.default.error(o),void(r&&r(o))}this.sessionWorker.sendNotice(e,(function(e){t&&t(e)}),(function(e){r&&r(e)}))},e.prototype.sendCustomMsg=function(e,t,r,o){if(!this.sessionWorker){var s="please join room first";return n.default.error(s),void(o&&o(s))}this.sessionWorker.sendCustomMsg(e,t,(function(e){r&&r(e)}),(function(e){o&&o(e)}))},e.prototype.sendCustomPeerMsg=function(e,t,r,o,s){if(!this.sessionWorker){var i="please join room first";return n.default.error(i),void(s&&s(i))}this.sessionWorker.sendCustomPeerMsg(e,t,r,(function(e){o&&o(e)}),(function(e){s&&s(e)}))},e.prototype.getWhiteboard=function(){if(this.sessionWorker)return this.sessionWorker.getWhiteboard();n.default.error("please join room first")},e.prototype.getRoomInfo=function(){if(this.sessionWorker)return this.sessionWorker.roomInfomation();n.default.error("please join room first")},e.prototype.on=function(e,t){if(this.logger.debug("Client on ",e),!i.includes(e))throw new Error("not supported event type");this.eventWorker.on(e,t)},e.prototype.off=function(e,t){if(this.logger.debug("Client off ",e),!i.includes(e))throw new Error("not supported event type");this.eventWorker.off(e,t)},e.prototype.getHistoryChat=function(e,t,r,o,s){if(!this.sessionWorker){var i="please join room first";return n.default.error(i),void(s&&s(i))}this.sessionWorker.getHistoryChat(e,t,r,(function(e){o&&o(e)}),(function(e){s&&s(e)}))},e.prototype.banRoom=function(e,t,r,o){if(!this.sessionWorker){var s="please join room first";return n.default.error(s),void(o&&o(s))}this.sessionWorker.ban(e,t,(function(e){r&&r(e)}),(function(e){o&&o(e)}))},e.prototype.reconnect=function(e){if(this.sessionWorker)"ucloud_leif"===e&&this.sessionWorker.reconnetIM();else{n.default.error("please join room first")}},e.prototype.createWhite=function(e,t){if(this.sessionWorker)this.sessionWorker.createWhite((function(t){e&&e(t)}),(function(e){t&&t(e)}));else{n.default.error("please join room first")}},e}();t.default=a},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(18),o=function(){function e(){this.emitter=new n.EventEmitter}return e.prototype.bind=function(e){e.emitter=this.emitter},e.prototype.on=function(e,t){this.emitter.on(e,t)},e.prototype.off=function(e,t){this.emitter.off(e,t)},e}();t.EventWorker=o},function(e,t,r){"use strict";var n,o="object"==typeof Reflect?Reflect:null,s=o&&"function"==typeof o.apply?o.apply:function(e,t,r){return Function.prototype.apply.call(e,t,r)};n=o&&"function"==typeof o.ownKeys?o.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function a(){a.init.call(this)}e.exports=a,a.EventEmitter=a,a.prototype._events=void 0,a.prototype._eventsCount=0,a.prototype._maxListeners=void 0;var u=10;function c(e){return void 0===e._maxListeners?a.defaultMaxListeners:e._maxListeners}function f(e,t,r,n){var o,s,i,a;if("function"!=typeof r)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof r);if(void 0===(s=e._events)?(s=e._events=Object.create(null),e._eventsCount=0):(void 0!==s.newListener&&(e.emit("newListener",t,r.listener?r.listener:r),s=e._events),i=s[t]),void 0===i)i=s[t]=r,++e._eventsCount;else if("function"==typeof i?i=s[t]=n?[r,i]:[i,r]:n?i.unshift(r):i.push(r),(o=c(e))>0&&i.length>o&&!i.warned){i.warned=!0;var u=new Error("Possible EventEmitter memory leak detected. "+i.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");u.name="MaxListenersExceededWarning",u.emitter=e,u.type=t,u.count=i.length,a=u,console&&console.warn&&console.warn(a)}return e}function l(){for(var e=[],t=0;t<arguments.length;t++)e.push(arguments[t]);this.fired||(this.target.removeListener(this.type,this.wrapFn),this.fired=!0,s(this.listener,this.target,e))}function p(e,t,r){var n={fired:!1,wrapFn:void 0,target:e,type:t,listener:r},o=l.bind(n);return o.listener=r,n.wrapFn=o,o}function d(e,t,r){var n=e._events;if(void 0===n)return[];var o=n[t];return void 0===o?[]:"function"==typeof o?r?[o.listener||o]:[o]:r?function(e){for(var t=new Array(e.length),r=0;r<t.length;++r)t[r]=e[r].listener||e[r];return t}(o):m(o,o.length)}function h(e){var t=this._events;if(void 0!==t){var r=t[e];if("function"==typeof r)return 1;if(void 0!==r)return r.length}return 0}function m(e,t){for(var r=new Array(t),n=0;n<t;++n)r[n]=e[n];return r}Object.defineProperty(a,"defaultMaxListeners",{enumerable:!0,get:function(){return u},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");u=e}}),a.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},a.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},a.prototype.getMaxListeners=function(){return c(this)},a.prototype.emit=function(e){for(var t=[],r=1;r<arguments.length;r++)t.push(arguments[r]);var n="error"===e,o=this._events;if(void 0!==o)n=n&&void 0===o.error;else if(!n)return!1;if(n){var i;if(t.length>0&&(i=t[0]),i instanceof Error)throw i;var a=new Error("Unhandled error."+(i?" ("+i.message+")":""));throw a.context=i,a}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)s(u,this,t);else{var c=u.length,f=m(u,c);for(r=0;r<c;++r)s(f[r],this,t)}return!0},a.prototype.addListener=function(e,t){return f(this,e,t,!1)},a.prototype.on=a.prototype.addListener,a.prototype.prependListener=function(e,t){return f(this,e,t,!0)},a.prototype.once=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.on(e,p(this,e,t)),this},a.prototype.prependOnceListener=function(e,t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);return this.prependListener(e,p(this,e,t)),this},a.prototype.removeListener=function(e,t){var r,n,o,s,i;if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t);if(void 0===(n=this._events))return this;if(void 0===(r=n[e]))return this;if(r===t||r.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete n[e],n.removeListener&&this.emit("removeListener",e,r.listener||t));else if("function"!=typeof r){for(o=-1,s=r.length-1;s>=0;s--)if(r[s]===t||r[s].listener===t){i=r[s].listener,o=s;break}if(o<0)return this;0===o?r.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(r,o),1===r.length&&(n[e]=r[0]),void 0!==n.removeListener&&this.emit("removeListener",e,i||t)}return this},a.prototype.off=a.prototype.removeListener,a.prototype.removeAllListeners=function(e){var t,r,n;if(void 0===(r=this._events))return this;if(void 0===r.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==r[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete r[e]),this;if(0===arguments.length){var o,s=Object.keys(r);for(n=0;n<s.length;++n)"removeListener"!==(o=s[n])&&this.removeAllListeners(o);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=r[e]))this.removeListener(e,t);else if(void 0!==t)for(n=t.length-1;n>=0;n--)this.removeListener(e,t[n]);return this},a.prototype.listeners=function(e){return d(this,e,!0)},a.prototype.rawListeners=function(e){return d(this,e,!1)},a.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):h.call(e,t)},a.prototype.listenerCount=h,a.prototype.eventNames=function(){return this._eventsCount>0?n(this._events):[]}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(20),o=r(4),s=r(1),i=r(21),a=r(46),u=["Msg","Ban","Users","CallAuth","CallApply","CallReply","CustomContent","Bulletin","Id","CustomContentPeers","Broadcast"],c=function(){},f=function(){function e(e,t,r,n,i){var a=this;void 0===i&&(i=""),this.session=new c,this.logger=s.default,this.adminList=[],this.defaultList=[],this.historyChat=[],this.roomState=!1,this.recontentMax=3,this.recontetnTotal=0,this.getWhiteboard=function(){if(a.checkRoomState()){if(a.uuid&&a.token)return{uuid:a.uuid,token:a.token};return"please create white"}},this.onType=function(e,t){var r=JSON.parse(t).msg;if(void 0===e&&a._emitter.emit("Broadcast",t),"IMMsg"===e){var n={UserType:"default",UserName:""};if("null"!==r.UserInfo&&(n=JSON.parse(r.userinfo)),r.userid!==a.session.user_id){var o={userId:r.userid,message:r.message,userName:n.UserName?n.UserName:"",userType:n.UserType};a.historyChat.push(o),a._emitter.emit("Msg",o)}}if("IMId"===e&&(a.uuid=r.uuid,a.token=r.token,a._emitter.emit("Id",t)),"IMUsers"===e)if("disconnect"===r.connecttype){var s=r.userid;a.adminList=a.adminList.filter((function(e){return e.UserId!==s})),a.defaultList=a.defaultList.filter((function(e){return e.UserId!==s})),a._emitter.emit("Users",{adminUsers:a.adminList,defaultUsers:a.defaultList})}else{var i=r.userinfo?JSON.parse(r.userinfo):{UserName:"",UserType:"default"};n={UserId:r.userid,UserName:i.UserName,UserType:i.UserType};console.log("user is join",n),"admin"===n.UserType?a.adminList.push(n):a.defaultList.push(n),a._emitter.emit("Users",{adminUsers:a.adminList,defaultUsers:a.defaultList})}"IMBulletin"===e&&a._emitter.emit("Bulletin",r),"IMCustomContent"===e&&a._emitter.emit("CustomContent",r),"IMCallAuth"===e&&a._emitter.emit("CallAuth",r),"IMCallApply"===e&&(a.callTeamList=r.callteamlist,a._emitter.emit("CallApply",a.callTeamList)),"IMCallReply"===e&&a._emitter.emit("CallReply",r),"IMCustomContentPeers"===e&&a._emitter.emit("CustomContentPeers",r)},this.session.app_id=e,this.session.room_id=t,this.session.user_id=r,this.session.user_type=n,this.session.user_name=i,s.default.info("初始化IM 成功"),s.default.info(o.version)}return Object.defineProperty(e.prototype,"emitter",{set:function(e){this._emitter=e},enumerable:!0,configurable:!0}),e.prototype.init=function(){},e.prototype.joinRoom=function(e,t){var r=this;i.newJoinIMRoom({UserId:this.session.user_id,RoomId:this.session.room_id,AppId:this.session.app_id,UserInfo:{UserType:this.session.user_type,UserName:this.session.user_name},UserType:this.session.user_type}).then((function(n){if(s.default.info("success join"),200===n.Code){if(!n.Msg.AppId){var o="房间未创建，请老师创建房间再加入";r.logger.error("join fail",o),t&&t(o)}r.roomState=!0,r.uuid=n.Msg.Uuid,r.token=n.Msg.Token,r.mid=n.Msg.MId,r.content(),r.getRoomInfo((function(n){r.getAllRoomUsers((function(t){var r=Object.assign({roomInfo:n},t);e&&e(r)}),(function(e){t&&t("join network err  "+e)}))}),(function(e){t&&t("join network err  "+e)}))}else t&&t(n.Msg),r.logger.error("network err ")})).catch((function(e){r.logger.error("join fail",e),t&&t(e)}))},e.prototype.content=function(){var e=this,t={appId:this.session.app_id,RoomId:this.session.room_id,userId:this.session.user_id,usertype:this.session.user_type,ConnectType:"admin"===this.session.user_type?"Create":""};i.contectWs(t).then((function(r){200==r.Code?("default"===e.session.user_type&&e.checkConnetState(),e.logger.info("success content ws"),e.ws=new a.GoIM({notify:function(t){var r=JSON.parse(t).imtype;e.onType(r,t)},param:n.__assign(n.__assign({},t),{MId:e.mid}),close:function(){e.reconnetIM()}}),e.logger.info(u),e.logger.info(r,e.ws)):e.logger.error("content ws error")}))},e.prototype.getRoomInfo=function(e,t){var r=this;this.checkRoomState()&&i.GetRoomInfo({AppId:this.session.app_id,RoomId:this.session.room_id}).then((function(n){200===n.Code?(r.roomInfo={RoomId:n.Msg.RoomId,Bulletin:n.Msg.Bulletin,CallOperation:n.Msg.CallOperation,applayList:n.Msg.CallTeamList},r.callTeamList=n.Msg.CallTeamList,e&&e(r.roomInfo)):t&&t(n.Msg)})).catch((function(e){t&&t(e),r.logger.error(e)}))},e.prototype.getHistoryChat=function(e,t,r,n,o){var s=this;if(void 0===e&&(e=0),this.checkRoomState()){if(0!=e&&11!==(e+"").length){var a="Parameter error, please check";return this.logger.error(a),void(o&&o(a))}i.GetRoomMsg({AppId:this.session.app_id,RoomId:this.session.room_id,StartTIme:e,Limit:t||20,Page:r||0}).then((function(e){if(200===e.Code){var t=e.Msg.IMMsg.filter((function(e){return"IMMsg"===JSON.parse(e.Msg).imtype})).map((function(e){var t=JSON.parse(e.Msg).msg;if(t.message&&t.userinfo){var r=JSON.parse(t.userinfo);return{userId:t.userid,message:t.message,userName:r.UserName?r.UserName:"",userType:r.UserType}}}));s.historyChat=t,n&&n(t)}else{s.logger.error("fail "),o&&o("fail ")}})).catch((function(e){s.logger.error("fail join",e),o&&o(e)}))}},e.prototype.getAllRoomUsers=function(e,t){var r=this;this.checkRoomState()&&i.GetRoomUser({AppId:this.session.app_id,RoomId:this.session.room_id}).then((function(t){t.Msg.AdminUsers.map((function(e){if(e.UserId!=r.session.user_id){var t={UserType:"admin",UserName:"",UserId:e.UserId};if("null"!==e.UserInfo){var n=JSON.parse(e.UserInfo);t.UserName=n.UserName,t.UserType=n.UserType}r.adminList.push({UserId:t.UserId,UserName:t.UserName,UserType:t.UserType})}})),t.Msg.TeamUsers.map((function(e){if(e.UserId!=r.session.user_id){var t={UserType:"admin",UserName:"",UserId:e.UserId};if("null"!==e.UserInfo){var n=JSON.parse(e.UserInfo);t={UserType:n.userType?n.userType:n.UserType,UserName:n.userName?n.userName:n.UserName,UserId:e.UserId}}r.defaultList.push({UserId:t.UserId,UserName:t.UserName,UserType:t.UserType})}})),console.log(" this.adminList",r.adminList),e&&e({adminUsers:r.adminList,defaultUsers:r.defaultList})})).catch((function(e){r.logger.error("join fail",e),t&&t(e)}))},e.prototype.sendChatMsg=function(e,t,r){if(this.checkRoomState()){var n={userId:this.session.user_id,userType:this.session.user_type,userName:this.session.user_name,message:e};this.historyChat.push(n),this._emitter.emit("Msg",n),i.pushMessage({appId:this.session.app_id,RoomId:this.session.room_id,userId:this.session.user_id,Msg:e}).then((function(e){var r="push success  "+e.Code;t&&t(r)})).catch((function(e){r&&r(e||"push error")}))}},e.prototype.getUser=function(){if(this.checkRoomState())return{UserId:this.session.user_id,UserType:this.session.user_type,UserName:this.session.user_name}},e.prototype.getUsers=function(){if(this.checkRoomState())return{adminUsers:this.adminList,defaultUsers:this.defaultList}},e.prototype.getAdminUsers=function(){return this.checkRoomState()?this.adminList:[]},e.prototype.getDefaultUsers=function(){return this.checkRoomState()?this.defaultList:[]},e.prototype.getHistory=function(){return this.historyChat},e.prototype.close=function(e,t){var r=this;i.closeIM({appId:this.session.app_id,RoomId:this.session.room_id,userId:this.session.user_id}).then((function(t){var n="close  success "+t.Code;r.roomState=!1,e&&e(n)})).catch((function(e){t&&t(e||"close error")}))},e.prototype.checkRoomState=function(){if(this.roomState)return!0;return this.logger.error("join room fail, please check"),!1},e.prototype.sendGlobal=function(e,t,r){this.checkRoomState()&&i.PushAll({appId:this.session.app_id,Msg:e}).then((function(e){var r="push success "+e.Code;t&&t(r)})).catch((function(e){r&&r(e||"push error")}))},e.prototype.setAuthCall=function(e,t,r){this.checkRoomState()&&("admin"===this.session.user_type?i.changeAuthCall({appId:this.session.app_id,RoomId:this.session.room_id,userId:this.session.user_id,Operation:e}).then((function(e){if(200===e.Code){var n="change success "+e.Code;t&&t(n)}else{r&&r("change fail")}})).catch((function(e){r&&r(e||"change fail")})):this.logger.info("No permissions, only administrators can modify"))},e.prototype.sendApplyCall=function(e,t,r,n){this.checkRoomState()&&i.sendApplyCall({AppId:this.session.app_id,RoomId:this.session.room_id,Operation:t,ApplyUserId:this.session.user_id,ReplyUserId:e}).then((function(e){if(200===e.Code)r&&r();else{var t="applyCall result fail"+e.Code;n&&n(t)}})).catch((function(e){n&&n(e||"change fail")}))},e.prototype.sendReplyCall=function(e,t,r,n){this.checkRoomState()&&i.ReplyCall({appId:this.session.app_id,RoomId:this.session.room_id,Operation:t,ReplyUserId:e}).then((function(e){if(200===e.Code){var t="replyCall result success "+e.Code;r&&r(t)}else{var o="replyCall result fail"+e.Code;n&&n(o)}})).catch((function(e){n&&n(e||"replyCall fail")}))},e.prototype.sendNotice=function(e,t,r){this.checkRoomState()&&i.PushBulletin({appId:this.session.app_id,RoomId:this.session.room_id,Bulletin:e}).then((function(e){if(200===e.Code){var n="sendBulletin result success "+e.Code;t&&t(n)}else{var o="sendBulletin result fail"+e.Code;r&&r(o)}})).catch((function(e){r&&r(e||"sendBulletin fail")}))},e.prototype.sendCustomMsg=function(e,t,r,n){this.checkRoomState()&&i.PushCustomContent({appId:this.session.app_id,RoomId:this.session.room_id,CustomType:e,Content:t}).then((function(e){if(200===e.Code){var t="sendCustomMsg result success "+e.Code;r&&r(t)}else{var o="sendCustomMsg result fail"+e.Code;n&&n(o)}})).catch((function(e){n&&n(e||"sendCustomMsg fail")}))},e.prototype.ban=function(e,t,r,n){this.checkRoomState()&&i.banRoom({AppId:this.session.app_id,RoomId:this.session.room_id,UserId:t,banType:e}).then((function(e){if(200===e.Code){var t="ban result success "+e.Code;r&&r(t)}else{var o="ban result fail"+e.Code;n&&n(o)}})).catch((function(e){n&&n(e||"ban fail")}))},e.prototype.sendCustomPeerMsg=function(e,t,r,n,o){this.checkRoomState()&&i.IMCustomContentPeers({UserId:e,AppId:this.session.app_id,RoomId:this.session.room_id,CustomType:t,Content:r}).then((function(e){if(200===e.Code){var t="sendCustomPeerMsg result success "+e.Code;n&&n(t)}else{var r="sendCustomPeerMsg result fail"+e.Code;o&&o(r)}})).catch((function(e){o&&o(e||"sendCustomPeerMsg fail")}))},e.prototype.roomInfomation=function(){if(this.checkRoomState())return this.roomInfo},e.prototype.checkConnetState=function(){var e=this;setInterval((function(){e.roomState&&i.CheckConnect({UserId:e.session.user_id,AppId:e.session.app_id,RoomId:e.session.room_id,UserType:e.session.user_type}).then((function(t){if(0===t.Code){var r="ws is disconnect "+t.Code;e.logger.error(r),e.reconnetIM()}else{var n="ws is connect"+t.Code;e.logger.info(n),e.logger.info("保持连接中")}}))}),1e4)},e.prototype.reconnetIM=function(){var e=this;this.recontetnTotal<this.recontentMax?(this.logger.info("断线重连中..."),this.ws.closeIM(),this.ws=null,this.recontetnTotal+=1,this.joinRoom((function(t){e.logger.info(t)}),(function(t){e.logger.info(t)}))):this.logger.info("断线，但以达最大重连次数，请刷新浏览器重试")},e.prototype.createWhite=function(e,t){var r=this;this.checkRoomState()&&i.CreateWhite({AppId:this.session.app_id,RoomId:this.session.room_id}).then((function(n){if(200===n.Code){var o="create white success "+n.Code;r.logger.info(o),e&&e({uuid:n.Msg.Uuid,token:n.Msg.Token})}else{var s="create white error"+n.Code;t&&t(s)}}))},e}();t.SessionWorker=f},function(e,t,r){"use strict";r.r(t),r.d(t,"__extends",(function(){return o})),r.d(t,"__assign",(function(){return s})),r.d(t,"__rest",(function(){return i})),r.d(t,"__decorate",(function(){return a})),r.d(t,"__param",(function(){return u})),r.d(t,"__metadata",(function(){return c})),r.d(t,"__awaiter",(function(){return f})),r.d(t,"__generator",(function(){return l})),r.d(t,"__exportStar",(function(){return p})),r.d(t,"__values",(function(){return d})),r.d(t,"__read",(function(){return h})),r.d(t,"__spread",(function(){return m})),r.d(t,"__spreadArrays",(function(){return y})),r.d(t,"__await",(function(){return g})),r.d(t,"__asyncGenerator",(function(){return v})),r.d(t,"__asyncDelegator",(function(){return w})),r.d(t,"__asyncValues",(function(){return _})),r.d(t,"__makeTemplateObject",(function(){return b})),r.d(t,"__importStar",(function(){return R})),r.d(t,"__importDefault",(function(){return C}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function o(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var s=function(){return(s=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function i(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r}function a(e,t,r,n){var o,s=arguments.length,i=s<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var a=e.length-1;a>=0;a--)(o=e[a])&&(i=(s<3?o(i):s>3?o(t,r,i):o(t,r))||i);return s>3&&i&&Object.defineProperty(t,r,i),i}function u(e,t){return function(r,n){t(r,n,e)}}function c(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function f(e,t,r,n){return new(r||(r=Promise))((function(o,s){function i(e){try{u(n.next(e))}catch(e){s(e)}}function a(e){try{u(n.throw(e))}catch(e){s(e)}}function u(e){e.done?o(e.value):new r((function(t){t(e.value)})).then(i,a)}u((n=n.apply(e,t||[])).next())}))}function l(e,t){var r,n,o,s,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return s={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(s){return function(a){return function(s){if(r)throw new TypeError("Generator is already executing.");for(;i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}([s,a])}}}function p(e,t){for(var r in e)t.hasOwnProperty(r)||(t[r]=e[r])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}function h(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,o,s=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=s.next()).done;)i.push(n.value)}catch(e){o={error:e}}finally{try{n&&!n.done&&(r=s.return)&&r.call(s)}finally{if(o)throw o.error}}return i}function m(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(h(arguments[t]));return e}function y(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),o=0;for(t=0;t<r;t++)for(var s=arguments[t],i=0,a=s.length;i<a;i++,o++)n[o]=s[i];return n}function g(e){return this instanceof g?(this.v=e,this):new g(e)}function v(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,o=r.apply(e,t||[]),s=[];return n={},i("next"),i("throw"),i("return"),n[Symbol.asyncIterator]=function(){return this},n;function i(e){o[e]&&(n[e]=function(t){return new Promise((function(r,n){s.push([e,t,r,n])>1||a(e,t)}))})}function a(e,t){try{(r=o[e](t)).value instanceof g?Promise.resolve(r.value.v).then(u,c):f(s[0][2],r)}catch(e){f(s[0][3],e)}var r}function u(e){a("next",e)}function c(e){a("throw",e)}function f(e,t){e(t),s.shift(),s.length&&a(s[0][0],s[0][1])}}function w(e){var t,r;return t={},n("next"),n("throw",(function(e){throw e})),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,o){t[n]=e[n]?function(t){return(r=!r)?{value:g(e[n](t)),done:"return"===n}:o?o(t):t}:o}}function _(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=d(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise((function(n,o){(function(e,t,r,n){Promise.resolve(n).then((function(t){e({value:t,done:r})}),t)})(n,o,(t=e[r](t)).done,t.value)}))}}}function b(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}function R(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}function C(e){return e&&e.__esModule?e:{default:e}}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(5),s=r(2),i=r(3);t.joinIMRoom=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","JoinRoom");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("join room log error ",e)}))},t.closeIM=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/Disconnect");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("close im room log error ",e)}))},t.contectWs=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/Connect");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.pushMessage=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/PushRoom");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.banRoom=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/BanRoom");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.GetRoomUser=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/GetRoomUser");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.changeAuthCall=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","call/AuthCall");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.sendApplyCall=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","call/ApplyCall");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.GetRoomInfo=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/GetRoomInfo");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.GetRoomMsg=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/GetRoomMsg");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.PushCustomContent=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/PushCustomContent");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.IMCustomContentPeers=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/IMCustomContentPeers");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.PushBulletin=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/PushBulletin");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.PushAll=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/PushAll");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.ReplyCall=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","call/ReplyCall");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.CheckConnect=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/CheckOnline");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.CreateWhite=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/CreateWhite");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1})},t.newJoinIMRoom=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","im/NewJoinRoom");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("join room log error ",e)}))}},function(e,t,r){e.exports=r(23)},function(e,t,r){"use strict";var n=r(0),o=r(6),s=r(25),i=r(13);function a(e){var t=new s(e),r=o(s.prototype.request,t);return n.extend(r,s.prototype,t),n.extend(r,t),r}var u=a(r(9));u.Axios=s,u.create=function(e){return a(i(u.defaults,e))},u.Cancel=r(14),u.CancelToken=r(37),u.isCancel=r(8),u.all=function(e){return Promise.all(e)},u.spread=r(38),e.exports=u,e.exports.default=u},function(e,t){
/*!
 * Determine if an object is a Buffer
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
e.exports=function(e){return null!=e&&null!=e.constructor&&"function"==typeof e.constructor.isBuffer&&e.constructor.isBuffer(e)}},function(e,t,r){"use strict";var n=r(0),o=r(7),s=r(26),i=r(27),a=r(13);function u(e){this.defaults=e,this.interceptors={request:new s,response:new s}}u.prototype.request=function(e){"string"==typeof e?(e=arguments[1]||{}).url=arguments[0]:e=e||{},(e=a(this.defaults,e)).method=e.method?e.method.toLowerCase():"get";var t=[i,void 0],r=Promise.resolve(e);for(this.interceptors.request.forEach((function(e){t.unshift(e.fulfilled,e.rejected)})),this.interceptors.response.forEach((function(e){t.push(e.fulfilled,e.rejected)}));t.length;)r=r.then(t.shift(),t.shift());return r},u.prototype.getUri=function(e){return e=a(this.defaults,e),o(e.url,e.params,e.paramsSerializer).replace(/^\?/,"")},n.forEach(["delete","get","head","options"],(function(e){u.prototype[e]=function(t,r){return this.request(n.merge(r||{},{method:e,url:t}))}})),n.forEach(["post","put","patch"],(function(e){u.prototype[e]=function(t,r,o){return this.request(n.merge(o||{},{method:e,url:t,data:r}))}})),e.exports=u},function(e,t,r){"use strict";var n=r(0);function o(){this.handlers=[]}o.prototype.use=function(e,t){return this.handlers.push({fulfilled:e,rejected:t}),this.handlers.length-1},o.prototype.eject=function(e){this.handlers[e]&&(this.handlers[e]=null)},o.prototype.forEach=function(e){n.forEach(this.handlers,(function(t){null!==t&&e(t)}))},e.exports=o},function(e,t,r){"use strict";var n=r(0),o=r(28),s=r(8),i=r(9),a=r(35),u=r(36);function c(e){e.cancelToken&&e.cancelToken.throwIfRequested()}e.exports=function(e){return c(e),e.baseURL&&!a(e.url)&&(e.url=u(e.baseURL,e.url)),e.headers=e.headers||{},e.data=o(e.data,e.headers,e.transformRequest),e.headers=n.merge(e.headers.common||{},e.headers[e.method]||{},e.headers||{}),n.forEach(["delete","get","head","post","put","patch","common"],(function(t){delete e.headers[t]})),(e.adapter||i.adapter)(e).then((function(t){return c(e),t.data=o(t.data,t.headers,e.transformResponse),t}),(function(t){return s(t)||(c(e),t&&t.response&&(t.response.data=o(t.response.data,t.response.headers,e.transformResponse))),Promise.reject(t)}))}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t,r){return n.forEach(r,(function(r){e=r(e,t)})),e}},function(e,t,r){"use strict";var n=r(0);e.exports=function(e,t){n.forEach(e,(function(r,n){n!==t&&n.toUpperCase()===t.toUpperCase()&&(e[t]=r,delete e[n])}))}},function(e,t,r){"use strict";var n=r(12);e.exports=function(e,t,r){var o=r.config.validateStatus;!o||o(r.status)?e(r):t(n("Request failed with status code "+r.status,r.config,null,r.request,r))}},function(e,t,r){"use strict";e.exports=function(e,t,r,n,o){return e.config=t,r&&(e.code=r),e.request=n,e.response=o,e.isAxiosError=!0,e.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},e}},function(e,t,r){"use strict";var n=r(0),o=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];e.exports=function(e){var t,r,s,i={};return e?(n.forEach(e.split("\n"),(function(e){if(s=e.indexOf(":"),t=n.trim(e.substr(0,s)).toLowerCase(),r=n.trim(e.substr(s+1)),t){if(i[t]&&o.indexOf(t)>=0)return;i[t]="set-cookie"===t?(i[t]?i[t]:[]).concat([r]):i[t]?i[t]+", "+r:r}})),i):i}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?function(){var e,t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");function o(e){var n=e;return t&&(r.setAttribute("href",n),n=r.href),r.setAttribute("href",n),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:"/"===r.pathname.charAt(0)?r.pathname:"/"+r.pathname}}return e=o(window.location.href),function(t){var r=n.isString(t)?o(t):t;return r.protocol===e.protocol&&r.host===e.host}}():function(){return!0}},function(e,t,r){"use strict";var n=r(0);e.exports=n.isStandardBrowserEnv()?{write:function(e,t,r,o,s,i){var a=[];a.push(e+"="+encodeURIComponent(t)),n.isNumber(r)&&a.push("expires="+new Date(r).toGMTString()),n.isString(o)&&a.push("path="+o),n.isString(s)&&a.push("domain="+s),!0===i&&a.push("secure"),document.cookie=a.join("; ")},read:function(e){var t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}:{write:function(){},read:function(){return null},remove:function(){}}},function(e,t,r){"use strict";e.exports=function(e){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(e)}},function(e,t,r){"use strict";e.exports=function(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}},function(e,t,r){"use strict";var n=r(14);function o(e){if("function"!=typeof e)throw new TypeError("executor must be a function.");var t;this.promise=new Promise((function(e){t=e}));var r=this;e((function(e){r.reason||(r.reason=new n(e),t(r.reason))}))}o.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},o.source=function(){var e;return{token:new o((function(t){e=t})),cancel:e}},e.exports=o},function(e,t,r){"use strict";e.exports=function(e){return function(t){return e.apply(null,t)}}},function(e,t,r){var n=r(40)("jsonp");e.exports=function(e,t,r){"function"==typeof t&&(r=t,t={});t||(t={});var i,a,u=t.prefix||"__jp",c=t.name||u+o++,f=t.param||"callback",l=null!=t.timeout?t.timeout:6e4,p=encodeURIComponent,d=document.getElementsByTagName("script")[0]||document.head;l&&(a=setTimeout((function(){h(),r&&r(new Error("Timeout"))}),l));function h(){i.parentNode&&i.parentNode.removeChild(i),window[c]=s,a&&clearTimeout(a)}return window[c]=function(e){n("jsonp got",e),h(),r&&r(null,e)},e=(e+=(~e.indexOf("?")?"&":"?")+f+"="+p(c)).replace("?&","?"),n('jsonp req "%s"',e),(i=document.createElement("script")).src=e,d.parentNode.insertBefore(i,d),function(){window[c]&&h()}};var o=0;function s(){}},function(e,t,r){(function(n){function o(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r(41)).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),!r)return;var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var o=0,s=0;e[0].replace(/%[a-zA-Z%]/g,(function(e){"%%"!==e&&(o++,"%c"===e&&(s=o))})),e.splice(s,0,n)},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=o,t.useColors=function(){if("undefined"!=typeof window&&window.process&&"renderer"===window.process.type)return!0;return"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(o())}).call(this,r(10))},function(e,t,r){var n;function o(e){function r(){if(r.enabled){var e=r,o=+new Date,s=o-(n||o);e.diff=s,e.prev=n,e.curr=o,n=o;for(var i=new Array(arguments.length),a=0;a<i.length;a++)i[a]=arguments[a];i[0]=t.coerce(i[0]),"string"!=typeof i[0]&&i.unshift("%O");var u=0;i[0]=i[0].replace(/%([a-zA-Z%])/g,(function(r,n){if("%%"===r)return r;u++;var o=t.formatters[n];if("function"==typeof o){var s=i[u];r=o.call(e,s),i.splice(u,1),u--}return r})),t.formatArgs.call(e,i),(r.log||t.log||console.log.bind(console)).apply(e,i)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=o.debug=o.default=o).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,o=0;o<n;o++)r[o]&&("-"===(e=r[o].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r(42),t.names=[],t.skips=[],t.formatters={}},function(e,t){var r=1e3,n=60*r,o=60*n,s=24*o,i=365.25*s;function a(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var u,c=typeof e;if("string"===c&&e.length>0)return function(e){if((e=String(e)).length>100)return;var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(!t)return;var a=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return a*i;case"days":case"day":case"d":return a*s;case"hours":case"hour":case"hrs":case"hr":case"h":return a*o;case"minutes":case"minute":case"mins":case"min":case"m":return a*n;case"seconds":case"second":case"secs":case"sec":case"s":return a*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}(e);if("number"===c&&!1===isNaN(e))return t.long?a(u=e,s,"day")||a(u,o,"hour")||a(u,n,"minute")||a(u,r,"second")||u+" ms":function(e){if(e>=s)return Math.round(e/s)+"d";if(e>=o)return Math.round(e/o)+"h";if(e>=n)return Math.round(e/n)+"m";if(e>=r)return Math.round(e/r)+"s";return e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},function(e,t){var r;r=function(){return this}();try{r=r||new Function("return this")()}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){"use strict";e.exports=function(e,t){if(t=t.split(":")[0],!(e=+e))return!1;switch(t){case"http":case"ws":return 80!==e;case"https":case"wss":return 443!==e;case"ftp":return 21!==e;case"gopher":return 70!==e;case"file":return!1}return 0!==e}},function(e,t,r){"use strict";var n,o=Object.prototype.hasOwnProperty;function s(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(e){return null}}t.stringify=function(e,t){t=t||"";var r,s,i=[];for(s in"string"!=typeof t&&(t="?"),e)if(o.call(e,s)){if((r=e[s])||null!==r&&r!==n&&!isNaN(r)||(r=""),s=encodeURIComponent(s),r=encodeURIComponent(r),null===s||null===r)continue;i.push(s+"="+r)}return i.length?t+i.join("&"):""},t.parse=function(e){for(var t,r=/([^=?&]+)=?([^&]*)/g,n={};t=r.exec(e);){var o=s(t[1]),i=s(t[2]);null===o||null===i||o in n||(n[o]=i)}return n}},function(e,t,r){"use strict";r.r(t),r.d(t,"GoIM",(function(){return f}));var n=r(2);const o=16,s=0,i=4,a=6,u=8,c=12;var f=function(e){this.options=e||{},this.ws=null,this.createConnect(10,3e3)},l=function(e){};f.prototype.createConnect=function(e,t){var r=this;if(0!==e){!function(){function e(){var e=new ArrayBuffer(o),t=new DataView(e,0);t.setInt32(s,o),t.setInt16(i,o),t.setInt16(a,1),t.setInt32(u,2),t.setInt32(c,1),r.ws.send(e),l("send: heartbeat")}function t(){let e=r.options.param;var t,n,f,p,h,m=`{"mid":${e.MId}, "room_id":"live://${e.appId+e.RoomId}", "platform":"web", "accepts":[1000,1001,1002]}`,y=new ArrayBuffer(o),g=new DataView(y,0),v=d.encode(m);g.setInt32(s,o+v.byteLength),g.setInt16(i,o),g.setInt16(a,1),g.setInt32(u,7),g.setInt32(c,1),r.ws.send((t=y,n=v,f=new Uint8Array(t),p=new Uint8Array(n),(h=new Uint8Array(t.byteLength+n.byteLength)).set(f,0),h.set(p,t.byteLength),h.buffer)),l("send: auth token: "+m)}function h(e,t){var n=r.options.notify;n&&n(t)}r.ws=new WebSocket(`wss://${n.SERVER_CONFIG.wssUrl}/sub`),r.ws.binaryType="arraybuffer",r.ws.onopen=function(){t()},r.ws.onmessage=function(t){r.options.notify;var n=t.data,d=new DataView(n,0),m=d.getInt32(s),y=d.getInt16(i),g=d.getInt16(a),v=d.getInt32(u),w=d.getInt32(c);switch(v){case 8:l("receive: auth reply"),e(),f=setInterval(e,3e4);break;case 3:l("receive: heartbeat reply");break;case 9:for(var _=o;_<n.byteLength;_+=m){m=d.getInt32(_),y=d.getInt16(_+i),g=d.getInt16(_+a),v=d.getInt32(_+u),w=d.getInt32(_+c);h(0,b=p.decode(n.slice(_+y,_+m))),l("receive: ver="+g+" op="+v+" seq="+w+" message="+b)}break;default:var b;h(0,b=p.decode(n.slice(y,m))),l("receive: ver="+g+" op="+v+" seq="+w+" message="+b)}},r.ws.onclose=function(){f&&clearInterval(f),r.options.close&&r.options.close()}}();var f,p=new TextDecoder,d=new TextEncoder}},f.prototype.closeIM=function(){this.ws.close()}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(48),s=function(){function e(e){this.logger=n.default,this.app_id=e,this.logger.info("test")}return e.prototype.add=function(e,t,r,n,s){var i=this;e&&"string"==typeof e?r&&0!==r.length?o.addExam({AppId:this.app_id,Name:e,Desc:t,Questions:r}).then((function(e){n&&n("success add"+e.Code)})).catch((function(e){s&&s(e),i.logger.error("add exam error "+e)})):s&&s("Questions is incorrect"):s&&s("Name is incorrect")},e.prototype.getExamList=function(e,t){var r=this;o.listExam({AppId:this.app_id}).then((function(t){e&&e(t.Msg.Exams)})).catch((function(e){t&&t(e),r.logger.error("add exam error "+e)}))},e.prototype.getDescribe=function(e,t,r){var n=this;e&&"string"==typeof e?o.getDescribeExam({AppId:this.app_id,ExamId:e}).then((function(e){t&&t(e.Msg)})).catch((function(e){r&&r(e),n.logger.error("get detail exam error "+e)})):r&&r("ExamId is incorrect")},e.prototype.start=function(e,t,r,n){var s=this;e&&"string"==typeof e?t&&"string"==typeof t?o.startExam({AppId:this.app_id,ExamId:t,RoomId:e}).then((function(e){r&&r(e.Msg)})).catch((function(e){n&&n(e),s.logger.error("start exam error "+e)})):n&&n("ExamId is incorrect"):n&&n("RoomId is incorrect")},e.prototype.submit=function(e,t,r,n,s,i,a,u){var c=this;e&&"string"==typeof e?t&&"string"==typeof e?r&&"string"==typeof r?n&&"string"==typeof n?s&&"number"==typeof s?i&&0!==i.length?o.submitExam({AppId:this.app_id,ExamId:r,RoomId:e,UserId:t,ExamRecordId:n,SubmitTime:s,Answers:i}).then((function(e){a&&a(e.Msg),console.error("sub..>> success ",e)})).catch((function(e){u&&u(e),c.logger.error("start exam error "+e)})):u&&u("Answers is incorrect"):u&&u("SubmitTime is incorrect"):u&&u("ExamRecordId is incorrect"):u&&u("ExamId is incorrect"):u&&u("UserId is incorrect"):u&&u("RoomId is incorrect")},e.prototype.stop=function(e,t,r,n,s){var i=this;console.log(e,t,r),e&&"string"==typeof e?t&&"string"==typeof t?r&&"string"==typeof r?o.stopExam({AppId:this.app_id,RoomId:e,ExamId:t,ExamRecordId:r}).then((function(e){n&&n(e.Msg)})).catch((function(e){s&&s(e),i.logger.error("stop exam error "+e)})):s&&s("ExamRecordId is incorrect"):s&&s("ExamId is incorrect"):s&&s("RoomId is incorrect")},e.prototype.getStat=function(e,t,r,n,s){var i=this;e&&"string"==typeof e?t&&"string"==typeof t?r&&"string"==typeof r?o.getExamStat({AppId:this.app_id,RoomId:e,ExamId:t,ExamRecordId:r}).then((function(e){n&&n(e.Msg.Stats)})).catch((function(e){s&&s(e),i.logger.error("stop exam error "+e)})):s&&s("ExamRecordId is incorrect"):s&&s("ExamId is incorrect"):s&&s("RoomId is incorrect")},e.prototype.delExam=function(e,t,r){var n=this;e&&"string"==typeof e?o.deleteExam({AppId:this.app_id,ExamId:e}).then((function(e){t&&t(e.Msg)})).catch((function(e){r&&r(e),n.logger.error("delete exam error "+e)})):r&&r("ExamId is incorrect")},e}();t.default=s},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(1),o=r(5),s=r(2),i=r(3);t.addExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/AddExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("add exam error ",e)}))},t.listExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/ListExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))},t.getDescribeExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/DescribeExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))},t.startExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/StartExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))},t.submitExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/SubmitExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))},t.stopExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/StopExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))},t.getExamStat=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/GetExamStat");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))},t.deleteExam=function(e){var t=new i(s.SERVER_CONFIG.api).set("pathname","answer/DeleteExam");return o.post({url:t.href,data:e,crossOrigin:!0,needVerifyResponse:!1}).catch((function(e){n.default.error("get listExam error ",e)}))}}])}));